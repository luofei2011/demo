<!DOCTYPE HTML>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>CCAV今日直播</title>
    <link rel="stylesheet" href="./css/doubei.css" />
    <link rel="icon" type="image/x-icon" href="favicon.ico" />
    <!--[if IE 6]>
    <link rel="stylesheet" href="./css/ie6.css" />
    <![endif]-->
    <script type="text/javascript" src="./js/data.js"></script>
</head>
<body>
<script type="text/javascript">
    window.onload = function() {
        var oInput = $('search-text'), // 搜索框
            totop = $('totop'), // 回顶部
            header = $('header'), // header元素
            other_plat = $('other-plat'), // 第三方平台登录
            oMain = getElementByClassName('div.main'), // 事件监听器
            // 42px 为回顶部按钮自身的宽度
            winWidth = (document.body.clientWidth - 960) / 2 - 42;

        // 兼容placeholder
        placeholder(oInput);

        // 固定回顶部按钮的位置
        totop.style.right = winWidth + 'px';

        // 监听滚动事件并进行处理
        window.onscroll = function() {
            var scrollTop = document.documentElement.scrollTop || // ie
                            document.body.scrollTop;

            if ( scrollTop > 40 ) {
                totop.style.display = 'block';
                other_plat.style.display = 'block';
                header.style.display = 'none';
            } else {
                totop.style.display = 'none';
                other_plat.style.display = 'none';
                header.style.display = 'block';
            }
        }

        // 给回顶部按钮绑定事件
        totop.onclick = function() {
            window.scroll(0, 0);
        }

        // 使用父节点main做所有a.thumb的事件代理源
        oMain[0].onclick = function(e) {
            var e = window.event || e; // ie and w3c DOM
            var oTarget = e.srcElement ? e.srcElement : e.target,
                className = oTarget.className, prev;

            prev = oTarget.previousSibling;

            if ( className === 'thumb_non_active' ) {
                oTarget.className = 'thumb_active';
                prev.innerHTML = prev.innerHTML * 1 + 1; // * 1转换成int型
            } else if ( className === 'thumb_active' ) {
                oTarget.className = 'thumb_non_active';
                prev.innerHTML = prev.innerHTML * 1 - 1;
            }
        }
    }
</script>
<div id="wrapper">
    <div id="header">
        <div class="grid-960">
            <p class="headlink">
                <a href="http://duobei.com">首页</a>
                <a href="#" class="active">随便逛逛</a>
                <a href="#">继续随便逛逛</a>
            </p>
            <ul class="headmenu">
              <li>
                <a href="#">注册</a>
              </li>
              <li>
                <a href="#">登录</a>
              </li>
              <li>
              <div class="form-search">
                  <form action="" method="post">
                    <input name ="search-text" id="search-text" type="text" placeholder="搜索你感兴趣的课程">
                    <input type="submit" class="form-submit">
                  </form>
                </div>
              </li>
            </ul>
        </div>
    </div>
    <div id="content">
        <div class="today-live">
            <div class="content-title grid-960">
                <h2>CCAV今日直播</h2>
                <b class="content-title-icon"></b>
            </div>
            <div class="live-wrap">
                <div class="live-item grid-960">
                    <ul>
                        <script type="text/javascript">
                            ;(function() {
                                var today_live = data['today_live'],
                                    len = today_live.length, i = 0, 
                                    str = "";

                                for ( ; i < len; ) {
                                    if ( i == len - 1 ) {
                                        str += '<li class="non-margin-right">';
                                    } else {
                                        str += '<li>';
                                    }

                                    str += '<div class="one_video"><a href="#" class="video-bak">' +
                                           '<img src="' + today_live[i].url + '"></a>' +
                                           '<div class="detail-msg"><p class="item-title">' +
                                           today_live[i].title + '</p>' +
                                           '<p class="item-content">' + today_live[i].content + '</p>' +
                                           '<div class="author-msg">' +
                                           '<a href="#" class="author-photo"><img src="' +
                                           today_live[i].author_photo + '"></a>' +
                                           '<a href="#" class="author-name">' +
                                           today_live[i].author_name + '</a>' +
                                           '<a href="#" class="pub-time">' + today_live[i].pub_time +
                                           '</a></div></div>';

                                    if ( today_live[i].is_live ) {
                                        str += '<a href="#" class="live-icon">直播</a>';
                                    }
                                    
                                    str += '</div></li>';
                                    i += 1;
                                }
                                document.write(str);
                            })();
                        </script>
                    </ul>
                </div>
            </div>
        </div>
        <div class="grid-960">
            <!--互联网科技创业-->
            <div class="main">
                <div class="content-title">
                    <h2>互联网·科技·创业</h2>
                </div>
                <ul>
                    <script type="text/javascript">
                        ;(function() {
                            var internet = data['internet'],
                                len = internet.length, i = 0,
                                str = "";

                            for ( ; i < len; ) {
                                str += '<li class="small-item"><div class="one_video">' +
                                       '<a href="#" class="video-bak"><img src="' +
                                       internet[i].url + '"></a>' +
                                       '<div class="detail-msg"><p class="small-item-title">' +
                                       internet[i].title + '</p>' +
                                       '<div class="author-msg">' +
                                       '<a href="#" class="author-photo"><img src="' +
                                       internet[i].author_photo + '"></a>' +
                                       '<a href="#" class="author-name">' +
                                       internet[i].author_name + '</a>' +
                                       '<span class="fllow_num">' + internet[i].fllow_num + '</span>' +
                                       '<a href="javascript:void(0);" class="thumb_non_active">' + 
                                       '</a></div></div>';
                                
                                if ( internet[i].is_live ) {
                                    str += '<a href="#" class="live-icon">直播</a>';
                                }
                                
                                str += '</div></li>';
                                i += 1;
                            }
                            document.write(str);
                        })();
                    </script>
                </ul>
                <!--互联网科技创业结束-->
                <!--出国等相关视频信息-->
                <div class="content-title">
                    <h2>出国留学 托福·SAT·雅思</h2>
                </div>
                <ul>
                    <script type="text/javascript">
                        ;(function() {
                            var abroad = data['abroad'],
                                len = abroad.length, i = 0,
                                str = "";

                            for ( ; i < len; ) {
                                str += '<li class="small-item"><div>' +
                                       '<a href="#" class="video-bak"><img src="' +
                                       abroad[i].url + '"></a>' +
                                       '<div class="detail-msg"><p class="small-item-title">' +
                                       abroad[i].title + '</p>' +
                                       '<div class="author-msg">' +
                                       '<a href="#" class="author-photo"><img src="' +
                                       abroad[i].author_photo + '"></a>' +
                                       '<a href="#" class="author-name">' +
                                       abroad[i].author_name + '</a>' +
                                       '<span class="fllow_num">' + abroad[i].fllow_num + '</span>' +
                                       '<a href="javascript:void(0);" class="thumb_active">' + 
                                       '</a></div></div></div></li>';
                                i += 1;
                            }
                            document.write(str);
                        })();
                    </script>
                </ul>
                <!--出国等相关视频信息结束-->
            </div>
            <div class="slide">
                <div class="game-video">
                    <p>牛人的dota视频!!!</p>
                    <a href="#">
                        <img src="./img/bak/duobei_90.png" alt="" />
                    </a>
                    <span class="gray-arrow"></span>
                </div>
                <p class="play-dota">你游戏么? dota排行榜</p>
                <div class="game-rank">
                    <script type="text/javascript">
                        ;(function() {
                            var game_rank = data['game_rank'],
                                len = game_rank.length, i = 0,
                                str = "";

                            for ( ; i < len; ) {
                                str += '<div class="person-list">' +
                                       '<a href="#" class="author-photo"><img src="' +
                                       game_rank[i].person_photo + '"></a>' +
                                       '<div class="person-msg clearfix"><a href="#">' +
                                       game_rank[i].person_name + '</a>' +
                                       '<div>' + game_rank[i].description + '</div></div></div>';

                                i += 1;
                            }
                            document.write(str);
                        })();
                    </script>
                </div>
            </div>
        </div>
    </div>
    <span>
        <a id="totop" href="javascript:void(0);"></a>
    </span>
    <div id="other-plat">
        <span>优秀的你, 一定想发现, 分享更多干货知识</span>
        <span class="write-arrow"></span>
        <a href="" class="weibo-login">新浪微博登录</a>
        <a href="" class="renren-login">人人帐号登录</a>
    </div>
    <!--铺满一屏-->
    <div id="footer-push"></div>
</div>
<script type="text/javascript" src="./js/doubei.js"></script>
<div id="footer" class="grid-960">
    <ul>
      <li>
          <div class="duobei_logo"></div>
          <p>找课程, 上多贝</p>
      </li>
      <li>
        <p class="footer-item-title">我是老师</p>
        <p>
            <a href="#">发布公开课</a>
        </p>
        <p>
            <a href="#">教室常见方式</a>
        </p>
        <p>
            <a href="#">收费方式</a>
        </p>
        <p>
            <a href="#">如何嵌入多贝网络教室</a>
        </p>
        <p>
            <a href="#">如何实现屏幕共享</a>
        </p>
      </li>
      <li>
        <p class="footer-item-title">我是学生</p>
        <p>
            <a href="#">参加直播课</a>
        </p>
        <p>
            <a href="#">课程表</a>
        </p>
      </li>
      <li>
        <p class="footer-item-title">关于多贝</p>
        <p>
            <a href="#">和我们一起工作</a>
        </p>
        <p>
            <a href="#">意见反馈</a>
        </p>
        <p>
            <a href="#">联系我们</a>
        </p>
        <p>
            <a href="#">友情链接</a>
        </p>
      </li>
      <li>
        <p class="footer-item-title">关注我们</p>
        <p>
            <a href="#" class="weibo-icon">新浪微博</a>
        </p>
        <p>
            <a href="#" class="tx-icon">腾讯微博</a>
        </p>
        <p>
            <a href="#" class="rr-icon">人人主页</a>
        </p>
      </li>
    </ul>
    <div class="footer-company-info">
    <span>Copyright &copy; 2013 duobei.com | </span>
    <a href="#">服务条款</a> |
    <a href="#">京ICP证110831</a> |
    <span>京网安备11010802009</span>
    </div>
</div>
</body>
</html>
